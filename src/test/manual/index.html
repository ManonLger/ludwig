<html>
<head>
    <meta charset="utf-8">
    <link href="../../dist/bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <script type="text/javascript" src="../../dist/bower_components/jquery/dist/jquery.min.js" charset="utf-8"></script>

</head>
<body>
<script type="text/javascript" src="http://localhost:3000/bundle.js" charset="utf-8">
</script>
<script>
    var ludwig = new Ludwig();
</script>
<script>
    var currentState = {
        step1:'',
        step2:'',
        step3:''
    };

    function createLink() {
        var suggestionLink = ludwig.generateSuggestionURL(currentState);
        var elementContainer = document.getElementById('linkContainer');
        elementContainer.setAttribute('href', suggestionLink);
        elementContainer.innerText = suggestionLink;
    }

    function createSuggestion() {
        window.open(ludwig.generateSuggestionURL(currentState));
    }

    function showAcceptedTests() {
        window.open(ludwig.acceptedTestsURL());
    }

    function showSuggestedTests() {
        window.open(ludwig.suggestedTestsURL());
    }

    function createCompleteSuggestion(){
        $.get({
            url:'http://localhost:3000/createSuggestion',
            data:{
                title:$("#title").val(),
                description:$("#description").val(),
                state:currentState
            },
            success:function(){
                alert('PR created');
            },
            error:function(){
                alert('failed')
            }
        })
    }
</script>

</a>
</body>

<body>

<!-- Begin page content -->
<div class="container">
    <div class="form-group">
        <div class="row">
            <input type="button" class="btn btn-default col-sm-6" value="Générer un lien vers une nouvelle suggestion : ludwig.generateSuggestionURL()"
                   onclick="createLink()"/>
            <a class="col-sm-6" href="" id="linkContainer">
            </a>
        </div>
        <div class="row">
            <input type="button" class="btn btn-default col-sm-6"
                   value="Créer la suggestion + rediriger l'utilisateur : ludwig.generateSuggestionURL()"
                   onclick="createSuggestion()"/>
        </div>
        <div class="row">
            <input type="button" class="btn btn-default col-sm-6"
                   value="Aller à la page contenant les tests acceptés : ludwig.acceptedTestsURL()"
                   onclick="showAcceptedTests()"/>
        </div>
        <div class="row">
            <input type="button" class="btn btn-default col-sm-6"
                   value="Aller à la page contenant les tests suggérés : ludwig.suggestedTestsURL()"
                   onclick="showSuggestedTests()"/>
        </div>
    </div>
    <div class="form-group">
        <div class="row">
            <label class="col-sm-3" for="title">Titre</label>
            <input class="col-sm-3" type="text" id="title" name="title"/>
        </div>
        <div class="row">
            <label class="col-sm-3" for="description">Description</label>
            <textarea class="col-sm-3" type="text" id="description" name="description"></textarea>
        </div>
        <div class="row">
            <input type="button" class="btn btn-default" value="Créer un ticket complet" onclick="createCompleteSuggestion()"/>
        </div>
    </div>
</div>

<footer class="footer">
    <div class="container">
        <p class="text-muted"></p>
    </div>
</footer>

</body>

</html>

